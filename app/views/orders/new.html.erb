<% @page_title = '注文' %>

<div class="page-header">
  <h1>注文フォーム</h1>
</div>

<%= render 'shared/errors', obj: @order %>
<%= form_for @order, class: 'form-horizontal' do |f| %>
  <%= f.hidden_field :product_id %>

  <%= f.fields_for :product do |ff| %>
    <div class="form-group">
      <%= ff.label :name, class: 'control-label col-md-12' %>
      <div class="col-md-12">
        <%= ff.text_field :name, class: 'form-control', disabled: true %>
      </div>
    </div>
    <div class="form-group">
      <%= ff.label :price, class: 'control-label col-md-12' %>
      <div class="col-md-2">
        <%= ff.number_field :price, class: 'form-control', disabled: true %>
      </div>
    </div>
  <% end %>

  <div class="form-group">
    <div class="col-md-12">
      <%= f.select :wrapping_id, @wrapping, {prompt: true}, class: 'selectpicker show-tick show-menu-arrow' %>
    </div>
  </div>

  <%= f.nested_fields_for :addresses, wrapper_options: { class: 'col-md-12' } do |ff| %>
    <%= ff.remove_nested_fields_link '×', data: { confirm: 'この配達先を削除してよろしいですか?' },  class: 'btn btn-danger btn-xs' %>
    <div class="form-group">
      <%= ff.label :zipcode, class: 'control-label col-md-12' %>
      <div class="col-md-2">
        <%= ff.text_field :zipcode, placeholder: '〒 123-3456', class: 'form-control' %>
      </div>
    </div>
    <div class="form-group">
      <%= ff.label :dest, class: 'control-label col-md-12' %>
      <div class="col-md-12">
        <%= ff.text_field :dest, class: 'form-control' %>
      </div>
    </div>
  <% end %>
  <%= f.add_nested_fields_link :addresses, '送り先を追加', class: 'col-md-offset-11 col-md-1 btn btn-info btn-sm' %>

  <div class="form-group">
    <div class="col-md-offset-10 col-md-2">
      <%= link_to '編集', edit_admin_product_path(@product.id),
        class: 'btn btn-default' if show? %>
      <%= f.submit '更新', class: 'btn btn-primary' if edit_or_update? || edit_confirmation? %>
      <%= f.submit '新規作成', class: 'btn btn-primary' if new_or_create? || new_confirmation? %>
    </div>
  </div>
<% end %>
